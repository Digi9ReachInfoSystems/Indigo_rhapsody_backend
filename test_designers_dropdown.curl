# Test Designers Dropdown Endpoint
# This endpoint returns designers for dropdown filters

# Base URL - Update this to match your server URL
BASE_URL="http://localhost:3000"

echo "üß™ Testing Designers Dropdown Endpoint"
echo "======================================"
echo ""

# Test 1: Get all approved designers for dropdown
echo "‚úÖ Test 1: Get all approved designers"
echo "------------------------------------"
curl -X GET "${BASE_URL}/api/designers/dropdown" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 2: Get all designers (including unapproved)
echo "‚úÖ Test 2: Get all designers (including unapproved)"
echo "------------------------------------------------"
curl -X GET "${BASE_URL}/api/designers/dropdown?approved=false" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 3: Search designers by name
echo "‚úÖ Test 3: Search designers by name"
echo "---------------------------------"
curl -X GET "${BASE_URL}/api/designers/dropdown?search=Indigo" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 4: Search designers by description
echo "‚úÖ Test 4: Search designers by description"
echo "----------------------------------------"
curl -X GET "${BASE_URL}/api/designers/dropdown?search=sustainable" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 5: Search with no results
echo "‚úÖ Test 5: Search with no results"
echo "--------------------------------"
curl -X GET "${BASE_URL}/api/designers/dropdown?search=nonexistent" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

echo "üéØ Test Summary:"
echo "================"
echo "‚úÖ Test 1: Should return all approved designers"
echo "‚úÖ Test 2: Should return all designers (including unapproved)"
echo "‚úÖ Test 3: Should return designers matching 'Indigo'"
echo "‚úÖ Test 4: Should return designers with 'sustainable' in description"
echo "‚úÖ Test 5: Should return empty array for non-existent search"
echo ""
echo "üìù Query Parameters Available:"
echo "=============================="
echo "‚Ä¢ approved: Filter by approval status (default: true)"
echo "‚Ä¢ search: Search by designer name or description"
echo ""
echo "üìä Response Structure:"
echo "====================="
echo "‚Ä¢ success: Boolean indicating success"
echo "‚Ä¢ message: Response message"
echo "‚Ä¢ data.designers: Array of designers with:"
echo "  - _id: Designer ID"
echo "  - displayName: Designer display name (from userId)"
echo "  - shortDescription: Designer description"
echo "  - is_approved: Approval status"
echo "‚Ä¢ data.total: Total count of designers"
echo ""
echo "üí° Usage Examples:"
echo "=================="
echo "‚Ä¢ Basic dropdown: GET /api/designers/dropdown"
echo "‚Ä¢ Search by name: GET /api/designers/dropdown?search=Indigo"
echo "‚Ä¢ All designers: GET /api/designers/dropdown?approved=false"

# Test Stylist Profile API Endpoints
# This script tests all stylist profile functionality including CRUD operations and approval system

# Base URL - Update this to match your server URL
BASE_URL="http://localhost:3000"

# Authentication tokens - Update with valid tokens
USER_TOKEN="your_user_jwt_token_here"
ADMIN_TOKEN="your_admin_jwt_token_here"

echo "ðŸŽ¨ Testing Stylist Profile API Endpoints"
echo "========================================"
echo ""

# Test 1: Create stylist profile
echo "âœ… Test 1: Create stylist profile"
echo "--------------------------------"
curl -X POST "${BASE_URL}/api/stylist/create" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${USER_TOKEN}" \
  -d '{
    "stylistName": "Sarah Johnson",
    "stylistEmail": "sarah.johnson@example.com",
    "stylistPhone": "+1234567890",
    "stylistAddress": "123 Fashion Street",
    "stylistCity": "New York",
    "stylistState": "NY",
    "stylistPincode": "10001",
    "stylistCountry": "USA",
    "stylistImage": "https://example.com/sarah-profile.jpg",
    "stylistBio": "Professional stylist with 5+ years of experience in fashion and personal styling.",
    "stylistPortfolio": [
      "https://example.com/portfolio1.jpg",
      "https://example.com/portfolio2.jpg",
      "https://example.com/portfolio3.jpg"
    ],
    "stylistExperience": "5+ years in fashion styling",
    "stylistEducation": "Fashion Design Degree from FIT",
    "stylistSkills": [
      "Personal Styling",
      "Wardrobe Consulting",
      "Color Analysis",
      "Body Type Analysis",
      "Event Styling"
    ],
    "stylistAvailability": "Monday-Friday, 9AM-6PM",
    "stylistPrice": 150
  }' \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 2: Get my stylist profile
echo "âœ… Test 2: Get my stylist profile"
echo "--------------------------------"
curl -X GET "${BASE_URL}/api/stylist/my-profile" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${USER_TOKEN}" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 3: Update stylist profile
echo "âœ… Test 3: Update stylist profile"
echo "--------------------------------"
curl -X PUT "${BASE_URL}/api/stylist/update" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${USER_TOKEN}" \
  -d '{
    "stylistBio": "Updated bio: Professional stylist with 6+ years of experience in fashion and personal styling.",
    "stylistPrice": 175,
    "stylistSkills": [
      "Personal Styling",
      "Wardrobe Consulting",
      "Color Analysis",
      "Body Type Analysis",
      "Event Styling",
      "Celebrity Styling"
    ]
  }' \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 4: Get all stylist profiles (Admin)
echo "âœ… Test 4: Get all stylist profiles (Admin)"
echo "-------------------------------------------"
curl -X GET "${BASE_URL}/api/stylist/all?page=1&limit=10&status=all" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${ADMIN_TOKEN}" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 5: Get pending stylist profiles (Admin)
echo "âœ… Test 5: Get pending stylist profiles (Admin)"
echo "-----------------------------------------------"
curl -X GET "${BASE_URL}/api/stylist/pending?page=1&limit=10" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${ADMIN_TOKEN}" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 6: Get approved stylist profiles (Public)
echo "âœ… Test 6: Get approved stylist profiles (Public)"
echo "------------------------------------------------"
curl -X GET "${BASE_URL}/api/stylist/approved?page=1&limit=10&city=New York&minRating=4" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 7: Get stylist statistics (Admin)
echo "âœ… Test 7: Get stylist statistics (Admin)"
echo "-----------------------------------------"
curl -X GET "${BASE_URL}/api/stylist/statistics" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${ADMIN_TOKEN}" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 8: Approve stylist profile (Admin)
echo "âœ… Test 8: Approve stylist profile (Admin)"
echo "------------------------------------------"
curl -X POST "${BASE_URL}/api/stylist/approve/STYLIST_ID_HERE" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${ADMIN_TOKEN}" \
  -d '{
    "adminNotes": "Profile looks great! Approved for platform."
  }' \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 9: Reject stylist profile (Admin)
echo "âœ… Test 9: Reject stylist profile (Admin)"
echo "-----------------------------------------"
curl -X POST "${BASE_URL}/api/stylist/reject/STYLIST_ID_HERE" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${ADMIN_TOKEN}" \
  -d '{
    "rejectionReason": "Incomplete portfolio images",
    "adminNotes": "Please provide higher quality portfolio images and resubmit."
  }' \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 10: Get specific stylist profile by user ID
echo "âœ… Test 10: Get specific stylist profile by user ID"
echo "--------------------------------------------------"
curl -X GET "${BASE_URL}/api/stylist/profile/USER_ID_HERE" \
  -H "Content-Type: application/json" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

# Test 11: Delete stylist profile
echo "âœ… Test 11: Delete stylist profile"
echo "---------------------------------"
curl -X DELETE "${BASE_URL}/api/stylist/delete" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer ${USER_TOKEN}" \
  -w "\n\nHTTP Status: %{http_code}\nResponse Time: %{time_total}s\n" \
  -s
echo ""

echo "ðŸ“Š API Endpoints Summary:"
echo "========================"
echo "â€¢ POST /api/stylist/create - Create stylist profile (User)"
echo "â€¢ GET /api/stylist/my-profile - Get my stylist profile (User)"
echo "â€¢ PUT /api/stylist/update - Update stylist profile (User)"
echo "â€¢ DELETE /api/stylist/delete - Delete stylist profile (User)"
echo "â€¢ GET /api/stylist/all - Get all stylist profiles (Admin)"
echo "â€¢ GET /api/stylist/pending - Get pending stylist profiles (Admin)"
echo "â€¢ GET /api/stylist/approved - Get approved stylist profiles (Public)"
echo "â€¢ GET /api/stylist/statistics - Get stylist statistics (Admin)"
echo "â€¢ POST /api/stylist/approve/:stylistId - Approve stylist profile (Admin)"
echo "â€¢ POST /api/stylist/reject/:stylistId - Reject stylist profile (Admin)"
echo "â€¢ GET /api/stylist/profile/:userId - Get stylist profile by user ID (Public)"
echo ""

echo "ðŸ”’ Authentication Requirements:"
echo "=============================="
echo "â€¢ User routes: Requires valid user JWT token"
echo "â€¢ Admin routes: Requires valid admin JWT token with Admin role"
echo "â€¢ Public routes: No authentication required"
echo ""

echo "ðŸ“‹ Required Fields for Stylist Profile:"
echo "======================================="
echo "â€¢ stylistName (String)"
echo "â€¢ stylistEmail (String)"
echo "â€¢ stylistPhone (String)"
echo "â€¢ stylistAddress (String)"
echo "â€¢ stylistCity (String)"
echo "â€¢ stylistState (String)"
echo "â€¢ stylistPincode (String)"
echo "â€¢ stylistCountry (String)"
echo "â€¢ stylistImage (String)"
echo "â€¢ stylistBio (String)"
echo "â€¢ stylistPortfolio (Array of Strings)"
echo "â€¢ stylistExperience (String)"
echo "â€¢ stylistEducation (String)"
echo "â€¢ stylistSkills (Array of Strings)"
echo "â€¢ stylistAvailability (String)"
echo "â€¢ stylistPrice (Number, optional)"
echo ""

echo "ðŸŽ¯ Approval System Features:"
echo "============================"
echo "â€¢ Automatic pending status on creation"
echo "â€¢ Admin approval/rejection workflow"
echo "â€¢ Email notifications for status changes"
echo "â€¢ FCM push notifications"
echo "â€¢ Admin notes and rejection reasons"
echo "â€¢ Profile reset to pending on updates"
echo ""

echo "ðŸ’¡ Usage Examples:"
echo "=================="
echo "â€¢ Create profile: POST /api/stylist/create"
echo "â€¢ Search approved: GET /api/stylist/approved?city=NYC&minRating=4"
echo "â€¢ Admin approve: POST /api/stylist/approve/STYLIST_ID"
echo "â€¢ Admin reject: POST /api/stylist/reject/STYLIST_ID"
echo ""
